(this.webpackJsonpants=this.webpackJsonpants||[]).push([[0],{48:function(e,t,a){e.exports={canvas:"Map_canvas__305z_"}},60:function(e,t,a){e.exports=a(70)},69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),i=a.n(o),l=a(48),c=a.n(l),u={ants:[],colony:{food:0},lab:{alpha:1,beta:1,q:1,rho:.2},simulator:{numAnt:80,numIteration:80},map:{nodes:[],edges:[]},canvas:{},report:{messages:[]}},s=Object(n.createContext)(u),d=function(){var e=Object(n.useContext)(s);if(void 0===e)throw new Error("useAppState must be used within a AppStateProvider");return e},p=r.a.createContext(void 0);function m(){var e=Object(n.useContext)(p);if(void 0===e)throw new Error("useAppDispatch must be used within a AppDispatchProvider");return e}var h=function(){var e=Object(n.useRef)(null),t=d().ants,a=m();return Object(n.useEffect)((function(){var a=e.current;if(a){var n=a.getContext("2d");n&&(n.imageSmoothingEnabled=!1,n.clearRect(0,0,100,100),t.forEach((function(e){return function(e,t){e.fillRect(5*t.x,5*t.y,2,2)}(n,e)})))}}),[t,e]),r.a.createElement("canvas",{ref:e,className:c.a.canvas,width:500,height:500,onClick:function(t){var n=e.current;if(n){var r=n.getBoundingClientRect(),o={x:Math.floor((t.clientX-r.left)/5),y:Math.floor((t.clientY-r.top)/5)};a({type:"canvasAddAnt",ant:o})}}})},f=a(32),b=a(15),g=a(3),v=a(37),y=a(10),E=function(e,t){switch(t.type){case"canvasAddAnt":return Object(y.a)({},e,{ants:[].concat(Object(v.a)(e.ants),[t.ant])});case"updateAllAnts":return Object(y.a)({},e,{ants:t.payload});case"updateAnt":var a=e.ants.find((function(e){return e.id===t.payload.id}));if(a){var n=e.ants.indexOf(a),r=[].concat(Object(v.a)(e.ants.slice(0,n)),Object(v.a)(e.ants.slice(n+1)),[t.payload]);return Object(y.a)({},e,{ants:r})}return e;case"setAlpha":return Object(y.a)({},e,{lab:Object(y.a)({},e.lab,{alpha:t.payload})});case"setBeta":return Object(y.a)({},e,{lab:Object(y.a)({},e.lab,{beta:t.payload})});case"setQ":return Object(y.a)({},e,{lab:Object(y.a)({},e.lab,{q:t.payload})});case"setRho":return Object(y.a)({},e,{lab:Object(y.a)({},e.lab,{rho:t.payload})});case"setNumIteration":return Object(y.a)({},e,{simulator:Object(y.a)({},e.simulator,{numIteration:t.payload})});case"setNumAnt":return Object(y.a)({},e,{simulator:Object(y.a)({},e.simulator,{numAnt:t.payload})});case"consoleLog":if(t.payload){var o=e.report.messages.concat(t.payload);return Object(y.a)({},e,{report:Object(y.a)({},e.report,{messages:o})})}return e;case"consoleClear":return Object(y.a)({},e,{report:Object(y.a)({},e.report,{messages:[]})});default:throw new Error("Unhandled action type")}};function O(){return[d(),m()]}var x=a(113),j=a(114),A=a(116),w=a(118),k=a(115),C=a(125),M=a(117),N=a(123),_=a(52),B=a.n(_),R=a(49),L=a.n(R),z=function(){var e=m();return r.a.createElement(C.a,{"aria-label":"random ant",onClick:function(){var t={x:Math.floor(100*Math.random()),y:Math.floor(100*Math.random())};e({type:"canvasAddAnt",ant:t})}},r.a.createElement(L.a,null))},T=a(51),I=a.n(T),P=a(50),S=function e(){var t=this;Object(P.a)(this,e),this.width=25,this.height=25,this.generateTestMap=function(){var e=t._generateTestMapNode();return{nodes:e,edges:t._generateTestMapEdge(e)}},this._generateTestMapEdge=function(e){var a=[],n=0;return e.forEach((function(r){var o=t._findNodeRight(r,e);o&&(a.push({id:n,nodeA:r,nodeB:o,distance:1,pheromone:1}),n++);var i=t._findNodeDown(r,e);i&&(a.push({id:n,nodeA:r,nodeB:i,distance:1,pheromone:1}),n++);var l=t._findNodeUpRight(r,e);l&&(a.push({id:n,nodeA:r,nodeB:l,distance:1.4142,pheromone:1}),n++);var c=t._findNodeDownRight(r,e);c&&(a.push({id:n,nodeA:r,nodeB:c,distance:1.4142,pheromone:1}),n++)})),a},this._generateTestMapNode=function(){for(var e=[],a=0,n=0;n<t.width;n++)for(var r=0;r<t.height;r++)e.push({id:a,x:n,y:r}),a++;return e},this._findNodeRight=function(e,t){return t.find((function(t){return t.x===e.x+1&&t.y===e.y}))},this._findNodeDown=function(e,t){return t.find((function(t){return t.x===e.x&&t.y===e.y+1}))},this._findNodeUpRight=function(e,t){return t.find((function(t){return t.x===e.x+1&&t.y===e.y-1}))},this._findNodeDownRight=function(e,t){return t.find((function(t){return t.x===e.x+1&&t.y===e.y+1}))}};function D(e,t){var a=(new S).generateTestMap(),n=a.edges,r=a.nodes,o=r[Math.floor(Math.random()*r.length)],i=r[Math.floor(Math.random()*r.length)];t({type:"consoleClear"}),t({type:"consoleLog",payload:{type:"game",message:"start point: ("+o.x+","+o.y+")"}}),t({type:"consoleLog",payload:{type:"game",message:"target point: ("+i.x+","+i.y+")"}});var l=0,c=Array.from(Array(10).keys()).map((function(e){return{id:e,x:25,y:25,path:[o],food:!1}})),u=function(e,t){return n.find((function(a){return a.nodeA===e&&a.nodeB===t||a.nodeA===t&&a.nodeB===e}))},s=function(e){return n.filter((function(t){return t.nodeA===e||t.nodeB===e}))},d=function(e,t,a){var n=u(t,a);if(n){var r=n.pheromone,l=n.distance,c=s(t),d=[];return d=c.length>1&&t!==o&&t!==i?c.filter((function(t){return t.nodeA!==e&&t.nodeB!==e})):c,Math.pow(r,1)*Math.pow(1/l,1)/d.map((function(e){return Math.pow(e.pheromone,1)*Math.pow(1/e.distance,1)})).reduce((function(e,t){return e+t}),0)}return 0};var p=0;!function e(){t({type:"updateAllAnts",payload:c}),setTimeout((function(a){if(c.forEach((function(e){!function(e){var a,n,r=e.path.slice(-2)[0],c=e.path.slice(-1)[0],u=Math.random(),p=s(c),m=[];m=p.length>1&&c!==o&&c!==i?p.filter((function(e){return e.nodeA!==r&&e.nodeB!==r})):p;for(var h=0;h<m.length;h++){var f=(a=c,(n=m[h]).nodeA===a?n.nodeB:n.nodeB===a?n.nodeA:void 0);if(f&&(u-=d(r,c,f))<=0){e.path.push(f),e.x=f.x,e.y=f.y,f===i&&(e.food=!0),f===o&&!0===e.food&&(l++,e.food=!1);break}}t({type:"updateAnt",payload:e})}(e)})),n.forEach((function(e){!function(e,t){e.pheromone=.8*e.pheromone,t.forEach((function(t){u(t.path.slice(-1)[0],t.path.slice(-2)[0])===e&&(e.pheromone=e.pheromone+1/e.distance)}))}(e,c)})),p<20)e();else if(20===p){c.forEach((function(e){var a="K"+e.id+": ";e.path.forEach((function(e){a+=e.id,e===o&&(a+="[Home]"),e===i&&(a+="[Food]"),a+=" "})),t({type:"consoleLog",payload:{type:"console",message:a}})})),t({type:"consoleLog",payload:{type:"game",message:"Total Food: "+l}})}p++}),100)}()}var q=function(){var e=O(),t=Object(b.a)(e,2),a=(t[0],t[1]);return r.a.createElement(C.a,{"aria-label":"start simulator",onClick:function(){return D(0,a)}},r.a.createElement(I.a,null))},F=function(){var e=d(),t=e.lab,a=e.simulator,o=O(),i=Object(b.a)(o,2),l=(i[0],i[1]),c=Object(n.useState)(!1),u=Object(b.a)(c,2),s=u[0],p=u[1],m=Object(x.a)((function(e){return{root:{maxWidth:345,"& .MuiTextField-root":{margin:e.spacing(1),width:200}},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}))();return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:m.root},r.a.createElement(k.a,{in:s,timeout:"auto",unmountOnExit:!0},r.a.createElement(A.a,null,r.a.createElement("form",{noValidate:!0,autoComplete:"off"},r.a.createElement(N.a,{id:"number-of-ants",label:"Number of ants",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:a.numAnt,onChange:function(e){l({type:"setNumAnt",payload:e.target.value})}}),r.a.createElement(N.a,{id:"number-of-iteration",label:"Number of iteration",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:a.numIteration,onChange:function(e){l({type:"setNumIteration",payload:e.target.value})}}),r.a.createElement(N.a,{id:"alpha",label:"Alpha (>=0)",helperText:"the influence of pheromone",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:t.alpha,onChange:function(e){l({type:"setAlpha",payload:e.target.value})}}),r.a.createElement(N.a,{id:"beta",label:"Beta (>=1)",helperText:"the influence of the trail level",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:t.beta,onChange:function(e){l({type:"setBeta",payload:e.target.value})}}),r.a.createElement(N.a,{id:"q",label:"Q",helperText:"the pheromone amount",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:t.q,onChange:function(e){l({type:"setQ",payload:e.target.value})}}),r.a.createElement(N.a,{id:"rho",label:"Rho (>=0)",helperText:"pheromone evaporation coefficient",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",size:"small",value:t.rho,onChange:function(e){l({type:"setRho",payload:e.target.value})}}),r.a.createElement(M.a,{variant:"middle"}),r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Ant_colony_optimization_algorithms",target:"blank"},"Wikipedia - Ant colony optimization algorithms")))),r.a.createElement(w.a,{disableSpacing:!0},r.a.createElement(q,null),r.a.createElement(z,null),r.a.createElement(C.a,{className:Object(g.a)(m.expand,Object(f.a)({},m.expandOpen,s)),onClick:function(){p(!s)},"aria-expanded":s,"aria-label":"show more"},r.a.createElement(B.a,null)))))},Q=a(4),U=a(119),W=a(122),$=a(120),G=a(127),J=a(121),X=a(126),Y=function(){var e=d().report,t=Object(n.useState)(!0),a=Object(b.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!0),c=Object(b.a)(l,2),u=c[0],s=c[1],p=Object(x.a)((function(e){return{root:{height:"370px",padding:e.spacing(3),"& .MuiFormControlLabel-root":{color:U.a[300]},"& #message-list-grid":{height:"360px",overflow:"hidden",marginRight:"22px"},"& .MuiContainer-root":{height:"100%",fontSize:"x-small",color:U.a[300],overflowY:"scroll",overflowX:"hidden",paddingRight:"22px",boxSizing:"content-box"}}}}))(),m=e.messages.filter((function(e){return"console"===e.type&&o||"game"===e.type&&u})).map((function(e,t){return r.a.createElement("p",{key:t},"[",e.type,"] ",e.message)})),h=Object(Q.a)({switchBase:{color:U.a[300],"&$checked":{color:U.a[500]},"&$checked + $track":{backgroundColor:U.a[500]}},checked:{},track:{}})(X.a);return r.a.createElement("div",{className:p.root},r.a.createElement($.a,null,r.a.createElement(J.a,{container:!0,spacing:3},r.a.createElement(J.a,{item:!0,sm:2},r.a.createElement(G.a,{control:r.a.createElement(h,{checked:o,onChange:function(){i(!o)},value:"isConsoleDisplay",size:"small"}),label:"Console"})),r.a.createElement(J.a,{item:!0,sm:2},r.a.createElement(G.a,{control:r.a.createElement(h,{checked:u,onChange:function(){s(!u)},value:"isGameDisplayed",size:"small"}),label:"Game"}))),r.a.createElement(J.a,{container:!0,spacing:3},r.a.createElement(J.a,{item:!0,sm:12,id:"message-list-grid"},r.a.createElement(W.a,null,m)))))},H=function(e){var t=e.children,a=Object(n.useReducer)(E,u),o=Object(b.a)(a,2),i=o[0],l=o[1];return r.a.createElement(s.Provider,{value:i},r.a.createElement(p.Provider,{value:l},t))},K=a(124),V=a(71),Z=Object(x.a)((function(e){return{root:{"& .MuiBox-root":{position:"absolute",top:"50%",left:"50%",marginLeft:"200px"},"& #paper-map":{margin:"auto",background:"radial-gradient(circle, rgba(199,199,199,1) 0%, rgba(240,251,255,1) 100%)"},"& #paper-report":{backgroundColor:"#2f2e42"}}}})),ee=function(){var e=Z();return r.a.createElement(H,null,r.a.createElement(W.a,{maxWidth:"md",className:e.root},r.a.createElement(V.a,{square:!0,id:"paper-map",elevation:3},r.a.createElement(h,null)),r.a.createElement(K.a,null,r.a.createElement(F,null)),r.a.createElement(V.a,{square:!0,id:"paper-report"},r.a.createElement(Y,null))))};a(69);i.a.render(r.a.createElement(ee,null,null),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.882b86fa.chunk.js.map